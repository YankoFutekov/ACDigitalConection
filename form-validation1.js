function getExpirationDate(){let today=new Date,dd=today.getDate()+1,mm=today.getMonth()+1,yyyy=today.getFullYear();return dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),today=dd+"."+mm+"."+yyyy}function getInvoiceNumber(){let invNumber=0;return $.get("/getInvoiceNumber",function(data){invNumber=data}),invNumber}function evaluateInvNumber(data){return data<10?data="0000"+data:data<100?data="000"+data:data<1e3?data="00"+data:data<1e4&&(data="0"+data),data}$(function(){$(".stepper").activateStepper(),$("#questionaire").validate()}),$('input[name="before"]').change(function(){const hiddenDiv=$("#beforeSport");"да"==this.value?hiddenDiv.fadeIn(1e3):hiddenDiv.fadeOut(700)}),$('input[name="allergies"]').change(function(){const hiddenDiv=$("#allergiesFood");"да"==this.value?hiddenDiv.fadeIn(1e3):hiddenDiv.fadeOut(700)}),$('input[name="acne"]').change(function(){const hiddenDiv=$("#acneFood");"да"==this.value?hiddenDiv.fadeIn(1e3):hiddenDiv.fadeOut(700)}),$("#submit-button").on("click",e=>{e.preventDefault(),e.stopPropagation();let prices=[],regimeName="",regimePrice=0,nutritionRegime=$("#nutritionRegime:checked").val(),trainingRegime=$("#trainingRegime:checked").val(),complexRegime=$("#complexRegime:checked").val();if(nutritionRegime){let splitTemp=nutritionRegime.split("-");regimeName=splitTemp[0],regimePrice=splitTemp[1]}else if(trainingRegime){let splitTemp=trainingRegime.split("-");regimeName=splitTemp[0],regimePrice=splitTemp[1]}else if(complexRegime){let splitTemp=complexRegime.split("-");regimeName=splitTemp[0],regimePrice=splitTemp[1]}for(let i=0;i<prices.length;i++)void 0!==prices[i]&&(regimeName=prices[i].split("-")[0],regimePrice=prices[i].split("-")[1]);function getCheckboxValues(arr){let outputArr=[];return arr.each(function(){outputArr.unshift(this.value)}),outputArr}const selectedMeatsFishAndDairyProducts=$("input[name='meatsFishAndDairyProducts']:checked"),selectedNutsGrainsAndOtherProducts=$("input[name='nutsGrainsAndOtherProducts']:checked"),selectedFruits=$("input[name='fruits']:checked"),selectedVegetables=$("input[name='vegetables']:checked"),selectedPrivacy=$("input[name='privacy']:checked"),warningDivMeatsFishAndDairyProducts=$("div.warning-div#meatsFishAndDairyProducts"),warningDivNutsGrainsAndOtherProducts=$("div.warning-div#nutsGrainsAndOtherProducts"),warningDivFruits=$("div.warning-div#fruits"),warningDivVegetables=$("div.warning-div#vegetables"),warningDivPrivacy=$("div.warning-div#privacyPolicy");let chosenMeatsFishAndDairyProducts=[],chosenNutsGrainsAndOtherProducts=[],chosenFruits=[],chosenVegetables=[],chosenPrivacy=[],correctlySubmittedMeatsFishAndDairyProducts=!1,correctlySubmittedNutsGrainsAndOtherProducts=!1,correctlySubmittedFruits=!1,correctlySubmittedVegetables=!1,correctlySubmittedPrivacy=!1;if(selectedMeatsFishAndDairyProducts.length?(chosenMeatsFishAndDairyProducts=getCheckboxValues(selectedMeatsFishAndDairyProducts),correctlySubmittedMeatsFishAndDairyProducts=!0,warningDivMeatsFishAndDairyProducts.fadeOut()):(chosenMeatsFishAndDairyProducts=[],correctlySubmittedMeatsFishAndDairyProducts=!1,warningDivMeatsFishAndDairyProducts.fadeIn()),selectedNutsGrainsAndOtherProducts.length?(chosenNutsGrainsAndOtherProducts=getCheckboxValues(selectedNutsGrainsAndOtherProducts),correctlySubmittedNutsGrainsAndOtherProducts=!0,warningDivNutsGrainsAndOtherProducts.fadeOut()):(chosenNutsGrainsAndOtherProducts=[],correctlySubmittedMeatsFishAndDairyProducts=!1,warningDivNutsGrainsAndOtherProducts.fadeIn()),selectedFruits.length?(chosenFruits=getCheckboxValues(selectedFruits),correctlySubmittedFruits=!0,warningDivFruits.fadeOut()):(chosenFruits=[],correctlySubmittedFruits=!1,warningDivFruits.fadeIn()),selectedVegetables.length?(chosenVegetables=getCheckboxValues(selectedVegetables),correctlySubmittedVegetables=!0,warningDivVegetables.fadeOut()):(chosenVegetables=[],correctlySubmittedVegetables=!1,warningDivVegetables.fadeIn()),selectedPrivacy.length?(chosenPrivacy=getCheckboxValues(selectedPrivacy),correctlySubmittedPrivacy=!0,warningDivPrivacy.fadeOut()):(chosenPrivacy=[],correctlySubmittedPrivacy=!1,warningDivPrivacy.fadeIn()),correctlySubmittedMeatsFishAndDairyProducts&&correctlySubmittedNutsGrainsAndOtherProducts&&correctlySubmittedFruits&&correctlySubmittedVegetables&&correctlySubmittedPrivacy){let urlForRegimeQuestionnaire=$("#regimeQuestionnaire").action,dataOfregimeQuestionnaire=$("#regimeQuestionnaire").serialize();dataOfregimeQuestionnaire=decodeURI(dataOfregimeQuestionnaire),$.post(urlForRegimeQuestionnaire,dataOfregimeQuestionnaire),$("#regimePrice").val(regimePrice),$("#regimeDescription").val(regimeName),$("#expDate").val(getExpirationDate()),$.get("/getInvoiceNumber",function(data){data=evaluateInvNumber(data),$("#invoice").val(data),$("#ePayForm").submit()})}});